<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        
        <!-- Bot de Exemplo Simples -->
        <record id="demo_bot_simple" model="wa.bot">
            <field name="name">Bot Atendimento Simples</field>
            <field name="sequence">1</field>
            <field name="active">True</field>
            <field name="init_mode">auto</field>
            <field name="session_timeout">30</field>
            <field name="greeting_enabled">True</field>
            <field name="greeting_message">OlÃ¡! ğŸ‘‹ Bem-vindo ao nosso atendimento.

Digite /menu para ver as opÃ§Ãµes disponÃ­veis.</field>
        </record>

        <!-- Comando: Menu Principal -->
        <record id="demo_command_menu" model="wa.bot.command">
            <field name="bot_id" ref="demo_bot_simple"/>
            <field name="sequence">10</field>
            <field name="name">Menu Principal</field>
            <field name="command">/menu</field>
            <field name="description">Exibe menu de opÃ§Ãµes</field>
            <field name="python_code">result = """ğŸ“‹ *MENU DE OPÃ‡Ã•ES*

Por favor, escolha uma opÃ§Ã£o:

1ï¸âƒ£ /suporte - Suporte TÃ©cnico
2ï¸âƒ£ /comercial - Comercial/Vendas
3ï¸âƒ£ /status - Status do Pedido
4ï¸âƒ£ /horario - HorÃ¡rio de Atendimento

Digite o comando desejado."""</field>
        </record>

        <!-- Comando: Suporte -->
        <record id="demo_command_suporte" model="wa.bot.command">
            <field name="bot_id" ref="demo_bot_simple"/>
            <field name="sequence">20</field>
            <field name="name">Suporte TÃ©cnico</field>
            <field name="command">/suporte</field>
            <field name="description">Direciona para suporte tÃ©cnico</field>
            <field name="python_code">result = """ğŸ”§ *SUPORTE TÃ‰CNICO*

VocÃª foi direcionado para o suporte tÃ©cnico.
Nossa equipe responderÃ¡ em breve.

Por favor, descreva seu problema com o mÃ¡ximo de detalhes possÃ­vel.

â° HorÃ¡rio: Segunda a Sexta, 8h Ã s 18h
ğŸ“ Urgente: (11) 99999-9999"""</field>
        </record>

        <!-- Comando: Comercial -->
        <record id="demo_command_comercial" model="wa.bot.command">
            <field name="bot_id" ref="demo_bot_simple"/>
            <field name="sequence">30</field>
            <field name="name">Comercial/Vendas</field>
            <field name="command">/comercial</field>
            <field name="description">Direciona para comercial</field>
            <field name="python_code">result = """ğŸ’¼ *COMERCIAL / VENDAS*

VocÃª foi direcionado para o setor comercial.
Nossa equipe de vendas responderÃ¡ em breve.

Como podemos ajudÃ¡-lo?
â€¢ OrÃ§amento
â€¢ InformaÃ§Ãµes sobre produtos
â€¢ Parcerias

ğŸ“§ Email: comercial@empresa.com
ğŸ“ Tel: (11) 3333-3333"""</field>
        </record>

        <!-- Comando: Status -->
        <record id="demo_command_status" model="wa.bot.command">
            <field name="bot_id" ref="demo_bot_simple"/>
            <field name="sequence">40</field>
            <field name="name">Status do Pedido</field>
            <field name="command">/status</field>
            <field name="description">Consulta status de pedido</field>
            <field name="python_code"># Buscar pedidos do cliente (por telefone)
partner = env['res.partner'].sudo().search([
    ('mobile', '=', session.phone)
], limit=1)

if not partner:
    result = """âŒ Cliente nÃ£o encontrado.

Para consultar seus pedidos, precisamos que vocÃª esteja cadastrado em nosso sistema.

Entre em contato com /comercial para se cadastrar."""
else:
    # Buscar Ãºltimos 3 pedidos
    orders = env['sale.order'].sudo().search([
        ('partner_id', '=', partner.id)
    ], order='date_order desc', limit=3)
    
    if not orders:
        result = f"""ğŸ“¦ *STATUS DE PEDIDOS*

OlÃ¡, {partner.name}!

VocÃª ainda nÃ£o possui pedidos em nosso sistema.

Gostaria de fazer um pedido? Digite /comercial"""
    else:
        lines = [f"ğŸ“¦ *STATUS DE PEDIDOS*\n", f"Cliente: {partner.name}\n"]
        
        for order in orders:
            status_emoji = {
                'draft': 'ğŸ“',
                'sent': 'ğŸ“¤',
                'sale': 'âœ…',
                'done': 'ğŸ‰',
                'cancel': 'âŒ'
            }.get(order.state, 'â“')
            
            status_text = {
                'draft': 'Rascunho',
                'sent': 'Enviado',
                'sale': 'Confirmado',
                'done': 'Entregue',
                'cancel': 'Cancelado'
            }.get(order.state, order.state)
            
            lines.append(f"{status_emoji} *{order.name}*")
            lines.append(f"   Status: {status_text}")
            lines.append(f"   Valor: R$ {order.amount_total:,.2f}")
            lines.append(f"   Data: {order.date_order.strftime('%d/%m/%Y')}\n")
        
        result = "\n".join(lines)</field>
        </record>

        <!-- Comando: HorÃ¡rio -->
        <record id="demo_command_horario" model="wa.bot.command">
            <field name="bot_id" ref="demo_bot_simple"/>
            <field name="sequence">50</field>
            <field name="name">HorÃ¡rio de Atendimento</field>
            <field name="command">/horario</field>
            <field name="description">Exibe horÃ¡rios de atendimento</field>
            <field name="python_code">result = """â° *HORÃRIO DE ATENDIMENTO*

ğŸ¢ *Loja/EscritÃ³rio:*
â€¢ Segunda a Sexta: 8h Ã s 18h
â€¢ SÃ¡bado: 9h Ã s 13h
â€¢ Domingo: Fechado

ğŸ“± *WhatsApp (Este Canal):*
â€¢ Segunda a Sexta: 8h Ã s 20h
â€¢ SÃ¡bado: 9h Ã s 15h
â€¢ Domingo: Fechado

âš ï¸ Fora do horÃ¡rio, deixe sua mensagem que responderemos assim que possÃ­vel.

Feriados: Consulte nossa pÃ¡gina"""</field>
        </record>

    </data>
</odoo>
